<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <title>Memed integrada ao Ninsa√∫de</title>

    <style>
      body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont;
      }

      #btnSimularPaciente {
        position: fixed;
        top: 16px;
        right: 16px;
        z-index: 9999;
        padding: 10px 14px;
        font-size: 14px;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <button id="btnSimularPaciente">
      Simular paciente do Ninsa√∫de
    </button>

    <!-- Script da Memed -->
    <script
      src="https://integrations.memed.com.br/modulos/plataforma.sinapse-prescricao/build/sinapse-prescricao.min.js"
      data-token="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.WzkwMzg3LCIwYTZiZTgwM2U1YTcwNTg5NDJmZGQ2NmU3MzU2YWM1MSIsIjIwMjYtMDEtMjIiLCJzaW5hcHNlLnByZXNjcmljYW8iLCJwYXJ0bmVyLjMuODU1MjAiXQ.DbTqxosooGFCD6OhWW_ClktXPZN4B1Ecnev4OsavoXs">
    </script>

    <script>
      let memedReady = false;

      // ‚úÖ EVENTO CORRETO
      window.addEventListener("message", function (event) {
        if (
          event.data &&
          event.data.type === "MDHUB_ALL_MODULES_READY"
        ) {
          memedReady = true;
          console.log("Memed pronta para receber comandos");
        }
      });

      // üîπ Bot√£o de simula√ß√£o
      document
        .getElementById("btnSimularPaciente")
        .addEventListener("click", function () {
          console.log("CLIQUEI NO BOT√ÉO");

          if (typeof MdHub === "undefined") {
            console.error("MdHub ainda n√£o existe");
            return;
          }
        });
    </script>
  </body>
</html>
